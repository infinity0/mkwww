{% set title = "Blog" -%}
{% extends path_themepage -%}
{%- block main %}
{% filter adoc2main -%}
= Blog

Autogenerated list of all posts, sorted by most recently modified.

{% for post in sitenav.children["blog"].children.values()|sort(attribute='modifiedTs', reverse=True) -%}
* {{post.modifiedTs|ts_date}} - link:{{baseRel}}/{{post.href}}[{{post.title}}]
{% endfor %}

Note that this is unlike the navigation bar, which is reverse-sorted by
filename. Moreover, some dates have been overridden manually.

We do this from the j2 `sitenav` variable, just like what the left-side
navigation bar uses. Code:

----
{% raw -%}
{% for post in sitenav.children["blog"].children.values()|sort(attribute='modifiedTs', reverse=True) -%}
* {{post.modifiedTs|ts_date}} - link:{{baseRel}}/{{post.href}}[{{post.title}}]
{% endfor %}
{%- endraw %}
----

is what produces the above. Note that j2 template expansion happens _before_
the block source is passed to the markup jinja2 filter (`adoc2main`, `md2main`,
`rst2main`, etc).
{% endfilter -%}
{% filter rst2main(initial_header_level=2) -%}
Heading level 2
===============

Test mixing docutils and asciidoc CSS on the same page.

{% for post in sitenav.children["blog"].children.values()|sort(attribute='modifiedTs', reverse=True) -%}
* {{post.modifiedTs|ts_date}} - `{{post.title}} <{{baseRel}}/{{post.href}}>`_
{% endfor %}

Same list, with docutils styling.
{% endfilter -%}
{% filter adoc2main(id_prefix="a") -%}
== Heading level 2

Test asciidoc level 2 heading.
{% endfilter -%}
{% endblock -%}
