/* = Definitions needed by our mkwww extensions to docutils. */

/* == Section heading anchors ("permalinks") */

:is([role="heading"], h1, h2, h3, h4, h5, h6) :is(.anchor, .anchor-cancel) {
  position: absolute;
  margin-left: -1.25ex;
  width: 1.75ex;
  text-decoration: none;
}

:not(:target, :target>*):is([role="heading"], h1, h2, h3, h4, h5, h6):hover .anchor::before {
  content: "§";
}

:is(:target, :target>*):is([role="heading"], h1, h2, h3, h4, h5, h6) .anchor-cancel::before {
  content: "×";
}

/* == :ext: role */

a.extlink-icon {
  display: inline-block;
  transform: scaleX(-1);
  text-decoration: inherit;
  margin-left: 0.3ex;
}
a.extlink-icon::after {
  content: "⎋";
}

/* == Details lists */

/* === Layout */

/* details-list has same indent as all other lists */
.dtlist details, ul, ol, dd {
  margin-inline-start: 1em;
  padding-inline-start: 0;
}
.dtlist details > *, li, dd {
  padding-inline-start: 0.5ex; /* space for permalink anchor */
}

/* details-list summary looks like a normal list-item */
.dtlist summary, li {
  list-style-position: outside;
}
.dtlist summary:only-child {
  list-style-type: disc;
}

/* details lists contents have margins, like normal paragraphs */
.dtlist:not(.simple) > details,
.dtlist:not(.simple) > details > :not(summary) {
  /* we do it like this as defining margins on both details & summary causes a
   * bug in chromium which breaks margin-collapse between closed details boxes,
   * leading to too-wide margins. bug is not present in firefox. */
  margin-block-start: 1em; margin-block-end: 1em;
}
.dtlist.simple > details {
  margin-block-start: 0; margin-block-end: 0;
}

/* === ctls */

.dtlist summary .dtlist-ctl {
  padding: 0 0.5ex;
  font-size: smaller;
  user-select: none;
}
.dtlist summary .dtlist-ctl:hover {
  cursor: pointer;
}
.dtlist summary .dtlist-ctl::before {
  content: "[↴|";
}
.dtlist summary .dtlist-ctl::after {
  content: "]";
}
.dtlist details[open] > summary .dtlist-ctl::before {
  content: "[↰|";
}
.dtlist details[open] > summary .dtlist-ctl::after {
  content: "]";
}
